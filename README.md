# Домашнее задание к занятию "Базы данных, их типы" - Ардашов Владимир

---

### Задание 1. СУБД

 Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

 1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

 1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

 1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

 1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

 1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

 1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

 1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

 1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

Ответ:

Задача 1.1 — Для хранения финансовой информации, формирования отчётности и прогнозирования рисков оптимальным выбором станет реляционная база данных (PostgreSQL).

Причины выбора:
 - Четкая структура таблиц и взаимосвязей между ними обеспечивает ясность и предсказуемость модели данных.
 - Высокая надёжность транзакций и поддержка ACID-принципов гарантирует целостность данных даже при работе с большими объёмами финансов.
 - Мощные инструменты аналитики позволяют легко формировать различные виды отчетов и анализировать финансовые показатели.

Задача 1.1* — API-хеширования зависит от конкретной реализации базы данных и системы, однако можно рассмотреть следующие варианты:
 - Использование аппаратного ускорителя (например, GPU).
 - Применять оптимизированные алгоритмы хеширования (SHA-256, BLAKE2b), поддерживаемые соответствующими библиотеками.
 - Использовать встроенные возможности СУБД для оптимизации запросов и индексов.

Задача 1.2 — Здесь отлично подойдёт NoSQL-решение типа документоориентированной базы данных (MongoDB):

Почему выбор NoSQL:
 - Гибкость структуры данных позволяет хранить разнородную информацию, поступающую с разных источников (лендинги, формы заявок).
 - Быстрая обработка и масштабируемость обеспечивают высокую производительность, особенно при росте количества пользователей и трафика.
 - Возможность горизонтального масштабирования для обработки больших объемов данных.

Задача 1.2* — Да, такую задачу можно решать одной СУБД, выбрав MongoDB. Она поддерживает:
 - Документоориентированное хранение для лендинга (гибкость схемы данных);
 - Возможность интеграции внешних сервисов для расширения функциональности CRM.

Задача 1.3 — Можно выбрать опять же документоориентированную систему вроде MongoDB:
 - Простота и наглядность структуры данных.
 - Поддержка быстрого поиска необходимой информации.
 - Масштабируемость и возможность добавлять новые материалы без изменения общей архитектуры.

Задача 1.3* — Документоориентированная СУБД из задачи 1.2 подходит и для задачи 1.3. Реализуется следующим образом:
 - Создаются отдельные коллекции («collections») для нормативных актов, инструкций и учебного материала.
 - Для удобства добавления новых документов реализуются интерфейсы импорта файлов и полнотекстового поиска внутри СУБД.

Задача 1.4 — Графовая база данных (Graph DB), такая как Neo4j или Amazon Neptune, является идеальным решением:
 - Позволяет эффективно моделировать сети и связи (маршруты, логистические цепочки).
 - Быстро строит кратчайшие пути и минимизирует затраты ресурсов благодаря поддержке графовых алгоритмов.
 - Эффективно решает задачи распределения ресурсов (автомобили, сотрудники).

Задача 1.4* — Отдел закупок может интегрироваться с той же базой данных, используя соответствующие узлы графа (объекты закупки, поставщики, заказчики). Это позволит избежать дублирования инфраструктуры и обеспечит единую картину движения товаров и услуг.

Задача 1.5* — Теоретически возможно построить единый инфраструктурный слой, комбинируя подходы различных типов баз данных (реляционные + документоориентированные + графовые).

Тем не менее, рекомендуемый подход заключается в выборе специализированных инструментов для конкретных целей:
 - Реляционная база данных для финансового анализа и отчетности.
 - Документоориентированная база данных для маркетинга и управления контентом.
 - Графовая база данных для задач логистики и маршрутизации.


---

### Задание 2. Транзакции

 2.1 Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

 2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Приведите ответ в свободной форме.

Ответ:

Для успешного завершения пополнения баланса счета телефона существует ряд последовательных шагов, независимо от способа оплаты — будь то ручное пополнение или автоматическое. Вот общий алгоритм действий, состоящий из шести этапов:

Сценарий пополнения счета вручную:

 Шаг 1: Пользователь инициирует операцию, вводит сумму пополнения и номер телефона.

 Шаг 2: Система проверяет введённые данные на правильность (например, проверка номера телефона).

 Шаг 3: Средства списываются с указанного пользователем платёжного инструмента (банковская карта, электронный кошелёк и др.).

 Шаг 4: Платежная система отправляет подтверждение операции продавцу услуг (оператору связи), удостоверяя успешность платежа.

 Шаг 5: Оператор связи зачисляет средства на счёт мобильного телефона клиента.

 Шаг 6: Клиенту отправляется уведомление о пополнении счёта (SMS-сообщением, push-уведомлением или другим способом).

Теперь рассмотрим ситуацию, когда используется автоплатеж:

 Шаг 1: Услуга автоплатеж подключается заранее самим клиентом или автоматически оператором (при настройке услуги). Определяются условия запуска автоплатежа (например, порог минимальной суммы на счете или определенная дата).

 Шаг 2: Баланс мобильного телефона достигает установленного порога автоматического пополнения или наступает дата платежа.

 Шаг 3: Автоматически запускается процесс перевода денежных средств с привязанного платёжного инструмента (карта банка, кошелек и т.п.) на указанный телефонный номер.

 Шаг 4: Проверяется наличие достаточного количества средств на счету платёжного инструмента и осуществляется операция списания денег.

 Шаг 5: Средства поступают на мобильный счёт абонента, оператор обновляет состояние счёта.

 Шаг 6: Пользователю приходит оповещение о пополнении баланса, уведомляя о завершении процедуры.

Таким образом, общая логика процесса схожа, однако при автоплатеже шаги выполняются автоматически без участия самого клиента.


---

### Задание 3. SQL vs NoSQL

 3.1 Напишите пять преимуществ SQL-систем по отношению к NoSQL.

 3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

Ответ:

Преимущества SQL-систем над NoSQL

 1. Строгая структура данных:
    SQL-системы работают с реляционными базами данных, где каждая таблица имеет фиксированную структуру полей. Это обеспечивает четкость и согласованность данных, упрощает разработку приложений и снижает вероятность ошибок, связанных с неверным форматом данных.

 2. Поддержка ACID-транзакций
Большинство SQL-систем обеспечивают строгий контроль транзакций согласно принципам атомарности, согласованности, изолированности и долговечности (ACID). Это критично важно для финансовых операций, электронной коммерции и любых ситуаций, где важна целостность данных.

 3. Стандартизация запросов
Язык SQL является стандартизированным языком запросов, что позволяет разработчикам писать запросы одинаково независимо от конкретной СУБД. Нет необходимости изучать специфичные API или языки запросов каждой системы отдельно.

 4. Мощная аналитика и агрегация данных
Благодаря своей структурированной природе, SQL отлично подходит для сложных аналитических запросов, позволяющих быстро агрегировать большие объемы данных, строить отчёты и проводить детальные исследования.

 5. Широкая поддержка инструментов и экосистема
За долгие годы существования SQL накопилось огромное количество инструментов и библиотек для анализа, визуализации, мониторинга производительности и оптимизации баз данных. Всё это делает работу разработчиков и администраторов проще и эффективнее.

Преимущества NewSQL систем перед SQL и NoSQL

NewSQL представляет собой гибридный подход, сочетающий масштабируемость и гибкость NoSQL с поддержкой реляционной модели и ACID-гарантиями SQL. Преимущества:

 1. Масштабируемость
NewSQL поддерживает горизонтальное масштабирование, позволяя распределять нагрузку между несколькими узлами. Это решает проблему ограниченного масштабирования традиционных SQL-СУБД.

 2. Высокая производительность
Многие NewSQL-решения оптимизируют обработку запросов и индексирование данных, обеспечивая высокую скорость обработки даже больших объемов данных.

 3. Гибкость структуры данных
Некоторые NewSQL-системы поддерживают динамическое изменение схемы базы данных, предоставляя возможность изменять структуру таблиц без остановки приложения.

 4. Обеспечение ACID-транзакций
Хотя традиционные NoSQL-системы часто жертвуют ACID ради скорости и масштабируемости, NewSQL сохраняет поддержку полной семантики транзакций, делая возможным использование высоконагруженных систем, нуждающихся в сильной целостности данных.

 5. Совместимость с существующими инструментами и приложениями
Новый класс NewSQL предоставляет совместимые интерфейсы SQL, сохраняя возможность легко интегрироваться с существующей инфраструктурой, написанной на классических SQL-базах данных.

Таким образом, NewSQL предлагает решение, которое объединяет лучшие черты обеих  SQL и NoSQL, создавая мощную альтернативу традиционным решениям.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

Ответ:

При выборе СУБД для работы с большим объемом данных и интенсивными вычислениями следует учитывать следующие ключевые критерии:

 - Производительность системы — способность быстро обрабатывать сложные запросы и выполнять массовые операции с данными
 - Масштабируемость — возможность горизонтального (добавление серверов) и вертикального (усиление существующих узлов) масштабирования
 - Отказоустойчивость — наличие механизмов резервного копирования и восстановления после сбоев
 - Распределенность — эффективное распределение нагрузки между узлами кластера
 - Совместимость — поддержка стандартных протоколов и возможность интеграции с существующими системами

Модели распределенных вычислений

Для обработки данных на 1000 машин оптимально рассмотреть две модели:

 1. MapReduce (Apache Hadoop, Apache Spark)
 * Преимущества:
  * Идеальна для пакетной обработки больших данных
  * Эффективное распределение нагрузки
  * Встроенная отказоустойчивость
  * Параллельная обработка данных
 * Ограничения:
  * Не подходит для операций с мгновенным ответом
  * Сложность реализации сложных транзакций

 2. ACID-транзакции (MySQL, PostgreSQL)
 * Преимущества:
  * Гарантированная целостность данных
  * Поддержка сложных транзакций
  * Высокая надежность
  * Совместимость с SQL
 * Ограничения:
  * Более высокие требования к ресурсам
  * Сложность масштабирования

Рекомендации по выбору

Для нашей задачи с 1000 машин оптимальным выбором будет комбинация подходов:

 - Основная обработка — использование MapReduce для массовых вычислений и аналитики
 - Транзакционный слой — ACID-совместимые СУБД для операций, требующих строгой консистентности
 - Кэширование — внедрение промежуточных слоев для ускорения доступа к часто используемым данным

Такой гибридный подход позволит максимально эффективно использовать вычислительные ресурсы и обеспечить необходимую производительность при сохранении целостности данных.

---
